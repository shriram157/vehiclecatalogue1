ID: VOASGuide
_schema-version: '2.1'
description: MTA Project for VOAS Guide
version: 0.0.1

modules:
- name: voasGuide_Node
  type: nodejs
  path: voasGuide_Node
  parameters:
     host: voasGuide_Node
     register-service-url: true
     service-name: voasGuide_Node
     service-url: '${default-url}'
     disk-quota: 256MB
     memory: 256MB

  provides:
   - name: voasGuide_Node_api
     properties:
        url: ${default-url}
  requires:
   - name: VOAS_GUIDE_APIM_CUPS

- name: VOASGuide
  type: html5
  path: VOASGuide
  parameters:
     host: VOASGuide
     register-service-url: true
     service-name: VOASGuide
     service-url: '${default-url}'
     disk-quota: 512MB
     memory: 256MB
  build-parameters:
     builder: grunt
  requires:
   - name: uaa_VOASGuide
   - name: dest_VOASGuide
   - name: voasGuide_Node_api
     group: destinations
     properties:
         name: voasGuide_Node_backend
         url: '~{url}'
         forwardAuthToken: true
  provides:
     - name: VOASGuide
resources:
- name: uaa_VOASGuide
  parameters:
     path: ./xs-security.json
     service-plan: application
     service: xsuaa
  type: org.cloudfoundry.managed-service

- name: dest_VOASGuide
  parameters:
     service-plan: lite
     service: destination
  type: org.cloudfoundry.managed-service

- name: VOAS_GUIDE_APIM_CUPS
  type: org.cloudfoundry.existing-service
  parameters:
     service-name: VOAS_GUIDE_APIM_CUPS
  properties:
     odata-call-service-name: '${service-name}'